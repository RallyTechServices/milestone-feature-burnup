<!DOCTYPE html>
<html>
<head>
    <title>CATS-Milestone Burnup-0.1</title>
    <!--  (c) 2017 CA Technologies.  All Rights Reserved. -->
    <!--  Build Date: Sun Apr 08 2018 17:39:11 GMT-0700 (PDT) -->

    <script type="text/javascript">
        var APP_BUILD_DATE = "Sun Apr 08 2018 17:39:11 GMT-0700 (PDT)";
        var ARTIFACT = "US2361";
        var BUILDER  = "bedch02";
        var CHECKSUM = 21932250398;
    </script>

    <script type="text/javascript" src="/apps/2.1/sdk.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/async/1.22/async.min.js"></script>

    <!-- our highcharts (needed so that we can add patterns)
    -->
    <script type="text/javascript" src="/apps/2.1/lib/analytics/analytics-all.js"></script>



    <script type="text/javascript">
        Rally.onReady(function() {
            function LineFitter(){this.count=0,this.sumX=0,this.sumX2=0,this.sumXY=0,this.sumY=0}function linearProject(a,b){for(var c=new LineFitter,d=0;d<a.length;d++)c.add(d,a[d]);return c.project(b)}function projectToZero(a,b){for(var c=b;linearProject(a,c)>0;)c+=1;return c}function getReleaseTimeBox(a){var b=a.getContext().getTimeboxScope(),c=null;if(b){var d=b.getRecord();c=d.get("Name")}else c="";return c}function wsapiQuery(a,b){Ext.create("Rally.data.WsapiDataStore",{autoLoad:!0,limit:"Infinity",model:a.model,fetch:a.fetch,filters:a.filters,listeners:{scope:this,load:function(a,c){b(null,c)}}})}function snapshotQuery(a,b){var c={find:a.find,fetch:a.fetch,hydrate:a.hydrate,autoLoad:!0,pageSize:1e4,limit:"Infinity",listeners:{scope:this,load:function(a,c,d){console.log("snapshots:",c.length),b(null,c)}}};Ext.create("Rally.data.lookback.SnapshotStore",c)}function pointsUnitType(a){return"Points"==a}function createSeriesArray(){return[{name:"PreliminaryEstimate",description:"Preliminary Estimate",field:"CalcPreliminaryEstimate",display:"line",f:"sum",color:"Orange"},{name:"StoryPoints",description:"Story Points",field:"LeafStoryPlanEstimateTotal",display:"line",f:"sum",color:"DarkGray"},{name:"StoryCount",description:"Story Count",field:"LeafStoryCount",display:"line",f:"sum",color:"DarkGray"},{name:"StoryPointsProjection",description:"Scope Projection",projectOn:"Story Points",color:"DarkGray"},{name:"StoryCountProjection",description:"Count Projection",projectOn:"Story Count",color:"DarkGray"},{name:"AcceptedStoryPoints",description:"Accepted Points",field:"AcceptedLeafStoryPlanEstimateTotal",display:"line",f:"sum",color:"Green"},{name:"AcceptedStoryCount",description:"Accepted Count",field:"AcceptedLeafStoryCount",display:"line",f:"sum",color:"Green"},{name:"AcceptedPointsProjection",description:"Accepted Projection",projectOn:"Accepted Points",color:"Green"},{name:"AcceptedCountProjection",description:"Accepted Count Projection",projectOn:"Accepted Count",color:"Green"},{name:"FeatureCount",description:"Feature Count",field:"ObjectID",display:"column",f:"count",color:"Blue"},{name:"FeatureCountCompleted",description:"Completed Feature Count",field:"Completed",display:"column",f:"sum",color:"Green"},{name:"FeatureCountProjection",description:"Feature Count Projection",projectOn:"Completed Feature Count",color:"Green"},{name:"HistoricalProjection",description:"Historical Trend Projection",projectOn:"Accepted Points",color:"LightGray",hidden:!0,projectFrom:"mid"},{name:"RefinedEstimate",description:"Refined Feature Estimate",field:"RefinedEstimate",display:"line",f:"sum",color:"DarkBlue"}]}function createColorsArray(a){var b=[];return _.each(a,function(a,c){if(c>0){var d=_.find(app.series,function(b){return b.description===a.name});_.isUndefined(d)?b.push("LightGray"):b.push(d.color)}}),b}function trimHighChartsConfig(a){var b=new Date;return _.each(a,function(c,d){-1===c.name.indexOf("Projection")&&-1===c.name.indexOf("label")&&_.each(c.data,function(d,e){Date.parse(a[0].data[e])>b&&(c.data[e]=null)}),-1!==c.name.indexOf("Projection")&&(_.each(c.data,function(d,e){Date.parse(a[0].data[e])<b&&(c.data[e]=null)}),c.dashStyle="dash")}),a}function businessDaysFromDate(a,b){for(var c=0,d=new Date(a);b>=0;)d.setTime(a.getTime()+864e5*c),isBusinessDay(d)&&--b,++c;return d}function isBusinessDay(a){var b=a.getDay();return 0===b||6===b?!1:!0}function line_intersect(a,b){var c,d,e=a.x1,f=a.y1,g=a.x2,h=a.y2,i=b.x1,j=b.y1,k=b.x2,l=b.y2,m=(l-j)*(g-e)-(k-i)*(h-f);return 0==m?null:(c=((k-i)*(f-j)-(l-j)*(e-i))/m,d=((g-e)*(f-j)-(h-f)*(e-i))/m,{x:e+c*(g-e),y:f+c*(h-f),seg1:c>=0&&1>=c,seg2:d>=0&&1>=c})}function calcCompletionIndex1(a,b){var c="Points"==b?"Scope Projection":"Count Projection",d="Points"==b?"Accepted Projection":"Accepted Count Projection",e=function(a){var b=_.findIndex(a,function(a){return!_.isNull(a)}),c=a[b],d=a.length-1,e=a[d];return{x1:b,y1:c,x2:d,y2:e}};console.log("series",a),console.log(c,d);var f=_.find(a,function(a){return a.name==c}),g=_.find(a,function(a){return a.name==d});if(!f||!g)return"No Projection Data";console.log(f),console.log(g);var h=line_intersect(e(f.data),e(g.data));console.log("intersect",h);var i=Math.floor(h.x);if(_.isNaN(h.x)||h.x<0)return"Unknown";if(i<=f.data.length-1)return a[0].data[i];console.log("series",a);var j=new Date(_.last(a[0].data)),k=i-f.data.length-1,l=businessDaysFromDate(j,k);return l.toLocaleDateString()}Ext.define("Rally.technicalservices.InfoLink",{extend:"Rally.ui.dialog.Dialog",alias:"widget.tsinfolink",informationHtml:null,title:"Build Information",defaults:{padding:5,margin:5},closable:!0,draggable:!0,autoShow:!0,width:350,informationalConfig:null,showLog:!1,logger:null,items:[{xtype:"container",itemId:"information"},{xtype:"container",itemId:"button_box"}],initComponent:function(){Ext.id(this);this.title="<span class='icon-help'> </span>"+this.title,this.callParent(arguments)},_generateChecksum:function(a){var b,c=305419896;for(a=a.replace(/var CHECKSUM = .*;/,""),a=a.replace(/var BUILDER  = .*;/,""),a=a.replace(/\s/g,""),b=0;b<a.length;b++)c+=a.charCodeAt(b)*b;return c},_checkChecksum:function(a){var b=Ext.create("Deft.Deferred"),c=this;return Ext.Ajax.request({url:document.URL,params:{id:1},success:function(a){if(text=a.responseText,CHECKSUM){var d=c._generateChecksum(text);if(CHECKSUM!==d)return void b.resolve(!1)}b.resolve(!0)}}),b.promise},_addToContainer:function(a){var b=Ext.apply({xtype:"container",height:200,overflowY:!0},this.informationalConfig);a.add(b)},afterRender:function(){var a=Rally.getApp();if(!Ext.isEmpty(this.informationalConfig)){var b=this.down("#information");this._addToContainer(b)}this.showLog&&this.logger&&this.down("#button_box").add({xtype:"rallybutton",text:"Show Log",listeners:{scope:this,click:function(){this.logger.displayLog()}}}),a.isExternal()?this.addDocked({xtype:"container",cls:"build-info",padding:2,dock:"bottom",html:"... Running externally"}):this._checkChecksum(a).then({scope:this,success:function(a){a||this.addDocked({xtype:"container",cls:"build-info",dock:"bottom",padding:2,html:'<span class="icon-warning"> </span>Checksums do not match'})},failure:function(a){console.log("oops:",a)}}),this.callParent(arguments)},beforeRender:function(){if(this.callParent(arguments),this.informationHtml&&this.addDocked({xtype:"component",componentCls:"intro-panel",padding:2,html:this.informationHtml,dock:"bottom"}),this.addDocked({xtype:"container",cls:"build-info",padding:2,dock:"bottom",html:"This app was created by the CA AC Technical Services Team."}),APP_BUILD_DATE){var a=Ext.String.format("Built on: {0} <br/>Built by: {1}",APP_BUILD_DATE,BUILDER);ARTIFACT&&(a=a+"<br/>Source artifact: "+ARTIFACT),this.addDocked({xtype:"container",cls:"build-info",padding:2,dock:"top",html:a})}}}),Ext.define("CArABU.technicalservices.Logger",{saveForLater:!1,saveLines:100,logArray:[],constructor:function(a){Ext.apply(this,a)},setSaveForLater:function(a){this.saveForLater=a},log:function(a){var b="[ "+Ext.util.Format.date(new Date,"Y-m-d H:i:s.u")+" ]",c=[];c=Ext.Array.push(c,[b]),c=Ext.Array.push(c,Ext.Array.slice(arguments,0)),this.saveForLater&&(this.logArray||(this.logArray=[]),this.logArray.push(c.join(" ")),this.logArray.length>this.saveLines&&this.logArray.shift()),window.console&&console.log.apply(console,c)},getLogText:function(){return this.logArray&&0!==this.logArray.length?this.logArray.join("<br/>"):"-- no log --"},displayLog:function(){var a=this.getLogText();this.popup=Ext.create("Rally.ui.dialog.Dialog",{width:Ext.getBody().getWidth()-20,height:Ext.getBody().getHeight()-20,closable:!0,title:"Log",autoShow:!0,layout:"border",defaults:{layout:"fit",width:"50%",border:!1},items:[{region:"center",xtype:"container",html:a,autoScroll:!0}]})}}),Ext.define("TSUtilities",{singleton:!0,loadWsapiRecords:function(a){var b=Ext.create("Deft.Deferred"),c={model:"Defect",fetch:["ObjectID"]};return Ext.create("Rally.data.wsapi.Store",Ext.Object.merge(c,a)).load({callback:function(a,c,d){d?b.resolve(a):(console.error("Failed: ",c),b.reject("Problem loading: "+c.error.errors.join(". ")))}}),b.promise},loadAStoreWithAPromise:function(a,b){var c=Ext.create("Deft.Deferred");return Ext.create("Rally.data.wsapi.Store",{model:a,fetch:b}).load({callback:function(a,b,d){d?c.resolve(this):(console.error("Failed: ",b),c.reject("Problem loading: "+b.error.errors.join(". ")))}}),c.promise}});var acceptedPointsData=[],acceptedCountData=[],myMask=null,app=null,showAssignedProgram=!0;Ext.define("CArABU.app.MsBurn",{extend:"Rally.app.App",componentCls:"app",items:[{xtype:"container",itemId:"selector_box",layout:"hbox"}],config:{defaultSettings:{ignoreZeroValues:!0,flatScopeProjection:!1,completionDateScope:!1,featureCompleteByState:!1,featureCompleteState:"",PreliminaryEstimate:!0,StoryPoints:!0,StoryCount:!1,StoryPointsProjection:!0,StoryCountProjection:!1,AcceptedStoryPoints:!0,AcceptedStoryCount:!1,AcceptedPointsProjection:!0,AcceptedCountProjection:!1,FeatureCount:!1,FeatureCountCompleted:!1,HistoricalProjection:!1,RefinedEstimate:!1}},getSettingsFields:function(){var a=(new Ext.data.ArrayStore({fields:["scope"],data:[["Count"],["Points"]]}),_.map(createSeriesArray(),function(a){return{name:a.name,xtype:"rallycheckboxfield",label:a.description}})),b=[{name:"ignoreZeroValues",xtype:"rallycheckboxfield",boxLabelAlign:"after",fieldLabel:"ignoreZeroValues",margin:"0 0 15 50",labelStyle:"width:200px;",afterLabelTpl:"For projection ignore zero values"},{name:"flatScopeProjection",xtype:"rallycheckboxfield",boxLabelAlign:"after",fieldLabel:"Flat Scope Projection",margin:"0 0 15 50",labelStyle:"width:200px;",afterLabelTpl:"Do not project scope values"},{name:"completionDateScope",xtype:"rallycheckboxfield",boxLabelAlign:"after",fieldLabel:"Use count for Expected Completion Date",margin:"0 0 15 50",labelStyle:"width:300px;",afterLabelTpl:"(otherwise based on points)"},{name:"featureCompleteByState",xtype:"rallycheckboxfield",boxLabelAlign:"after",fieldLabel:"True if feature completed is based on feature state",margin:"0 0 15 50",labelStyle:"width:300px;",afterLabelTpl:"(otherwise based on 100% story completion)"},{name:"featureCompleteState",xtype:"rallytextfield",boxLabelAlign:"after",fieldLabel:"Only used if Feature Complete By State is set to true (above)",margin:"0 0 15 50",labelStyle:"width:200px;",afterLabelTpl:"(Optional) Feature state for completed features"}];return _.each(b,function(a){a.labelWidth=250,a.labelAlign="left"}),b.concat(a)},launch:function(){app=this,app.series=createSeriesArray(),app.ignoreZeroValues=app.getSetting("ignoreZeroValues"),app.flatScopeProjection=app.getSetting("flatScopeProjection"),app.completionDateScope=app.getSetting("completionDateScope"),app.featureCompleteByState=app.getSetting("featureCompleteByState"),app.featureCompleteState=app.getSetting("featureCompleteState"),app.msName="",app.msDate="";this.down("#selector_box").add({xtype:"rallymilestonecombobox",clearText:"Select a Milestone: ",itemId:"get_milestone",name:"get_milestone",margin:10,allowClear:!0,storeConfig:{},listeners:{scope:this,change:function(a,b,c){b&&(app.milestones=b,app.msName=a.getRecord().get("Name"),app.msDate=a.getRecord().get("TargetDate"),app.dothisnext())}}})},dothisnext:function(){this.project=this.getContext().getProject().ObjectID;var a=[];a.push({model:"PreliminaryEstimate",fetch:["Name","ObjectID","Value"],filters:[]}),a.push({model:"Milestone",fetch:["Name","ObjectID","Artifacts","Projects","TargetDate","TargetProject"],filters:[{property:"Name",operator:"=",value:app.msName}]}),a.push({model:"TypeDefinition",fetch:!0,filters:[{property:"Ordinal",operator:"=",value:0}]}),async.map(a,app.wsapiQuery,function(b,c){app.peRecords=c[0],app.releases=c[1],app.featureType=c[2][0].get("TypePath"),a=[{model:"Iteration",fetch:["Name","ObjectID","Project","StartDate","EndDate"]}],async.map(a,app.wsapiQuery,function(a,b){app.iterations=b[0],app.queryFeatures()})})},trimString:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},createIterationFilter:function(a){var b=app.getReleaseExtent(a),c=Ext.create("Rally.data.wsapi.Filter",{property:"EndDate",operator:">=",value:b.isoStart});return c=c.and(Ext.create("Rally.data.wsapi.Filter",{property:"EndDate",operator:"<=",value:b.isoEnd}))},getReleaseExtent:function(a){var b=_.min(_.pluck(a,function(a){return a.get("ActualStartDate")})),c=_.max(_.pluck(a,function(a){return a.get("ActualEndDate")})),d=Rally.util.DateTime.toUtcIsoString(b,!1);Rally.util.DateTime.toUtcIsoString(c,!1),Rally.util.DateTime.toUtcIsoString(new Date,!1);return app.msDate&&(isoEnd=Rally.util.DateTime.toUtcIsoString(app.msDate,!1)),console.log("ISO dates: ",d,isoEnd),{start:b,end:c,isoStart:d,isoEnd:isoEnd}},wsapiQuery:function(a,b){Ext.create("Rally.data.WsapiDataStore",{autoLoad:!0,limit:"Infinity",model:a.model,fetch:a.fetch,filters:a.filters,listeners:{scope:this,load:function(a,c){b(null,c)}}})},queryFeatures:function(){this.setLoading("Loading Features for Milestone..."),myMask=new Ext.LoadMask(Ext.getBody(),{msg:"Please wait..."});var a=this,b=_.uniq(_.map(app.releases,function(a){return a.get("Name")}));return console.log("releaseNames",b),console.log("FeatureType",app.featureType),Ext.create("Rally.data.WsapiDataStore",{autoLoad:!0,model:app.featureType,limit:"Infinity",fetch:["ObjectID","FormattedID","Milestones","Name","ActualStartDate","ActualEndDate"],filters:[{property:"Milestones.Name",operator:"=",value:app.msName}],listeners:{load:function(b,c){return console.log("Loaded:"+c.length," Features.",c),app.features=c,0===app.features.length?(a.setLoading(!1),void alert("No features for Milestone: "+app.msName)):void app.queryFeatureSnapshots()}}})},queryFeatureSnapshots:function(){this.setLoading("Loading snapshots...");var a=_.pluck(app.features,function(a){return a.get("ObjectID")}),b=app.getReleaseExtent(app.features),c={find:{ObjectID:{$in:a},_ValidTo:{$gte:b.isoStart}},autoLoad:!0,pageSize:1e3,limit:"Infinity",fetch:["_UnformattedID","ObjectID","_TypeHierarchy","PreliminaryEstimate","LeafStoryCount","LeafStoryPlanEstimateTotal","AcceptedLeafStoryPlanEstimateTotal","AcceptedLeafStoryCount","PercentDoneByStoryCount","RefinedEstimate","State"],hydrate:["_TypeHierarchy","State"]};c.listeners={scope:this,load:function(a,b,c){console.log("Loaded:"+b.length," Snapshots.",b),app.createChartData(b)}};Ext.create("Rally.data.lookback.SnapshotStore",c)},createChartData:function(a){this.setLoading("Aggregating data...");var b=_.map(a,function(a){return a.data}),c=app.getReleaseExtent(app.features),d=(_.sortBy(b,"_UnformattedID"),[]),e=Ext.create("MyBurnCalculator",{series:app.series,ignoreZeroValues:app.ignoreZeroValues,flatScopeProjection:app.flatScopeProjection,peRecords:app.peRecords,featureCompleteByState:app.featureCompleteByState,featureCompleteState:app.featureCompleteState}),f={deriveFieldsOnInput:e.getDerivedFieldsOnInput(),metrics:e.getMetrics(),summaryMetricsConfig:[],deriveFieldsAfterSummary:e.getDerivedFieldsAfterSummary(),granularity:e.lumenize.Time.DAY,tz:"America/Chicago",holidays:d,workDays:"Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,Sunday"},g=c.isoStart,h=c.isoEnd;calculator=new e.lumenize.TimeSeriesCalculator(f),calculator.addSnapshots(b,g,h);var i=[{name:"label"}];_.each(app.series,function(a){app.getSetting(a.name)===!0&&i.push({name:a.description,type:a.display})});var j=e.lumenize.arrayOfMaps_To_HighChartsSeries(calculator.getResults().seriesData,i);this.showChart(trimHighChartsConfig(j))},createPlotLines:function(a){var b=new Date(Date.parse(a[0])),c=new Date(Date.parse(a[a.length-1])),d=_.filter(this.iterations,function(a){return a.get("EndDate")>=b&&a.get("EndDate")<=c});d=_.uniq(d,function(a){return a.get("Name")});var e=_.map(d,function(b){var c=new Date(Date.parse(b.raw.EndDate)).toISOString().split("T")[0];return{label:b.get("Name"),dashStyle:"Dot",color:"grey",width:1,value:_.indexOf(a,c)}}),f=_.map(app.milestones,function(b){var c=new Date(Date.parse(app.msDate)).toISOString().split("T")[0];return{label:app.msName,color:"grey",width:1,value:_.indexOf(a,c)}});return e.concat(f)},showChart:function(a){this.setLoading("Building Chart...");app.expectedCompletionDate=calcCompletionIndex1(a,1==app.completionDateScope?"Count":"Points"),console.log("Expected Completed Date1",app.expectedCompletionDate);var b=this.down("#chart1");b&&b.removeAll();var c=this.createPlotLines(a[0].data),d=a[1].data.length<=140?7:a[1].data.length/20,e=app.msDate?Rally.util.DateTime.format(app.msDate,"Y-m-d"):"",f=Ext.create("Rally.ui.chart.Chart",{width:800,height:600,columnWidth:1,itemId:"chart1",chartData:{categories:a[0].data,series:a.slice(1,a.length)},chartColors:createColorsArray(a),chartConfig:{chart:{},title:{text:"Milestone Burnup ("+app.msName+")"},subtitle:{text:"Milestone Target Date: "+e+"<br>Expected Completion Date: "+app.expectedCompletionDate},plotOptions:{series:{marker:{radius:2}}},xAxis:{plotLines:c,tickInterval:d,type:"datetime",labels:{formatter:function(){return Highcharts.dateFormat("%b %d",Date.parse(this.value))}}},yAxis:{title:{text:"Points/Count"},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{},legend:{align:"center",verticalAlign:"bottom"}}});this.add(f),b=this.down("#chart1"),this.setLoading(!1);var g=Ext.get(b.id);h=g.query("div.x-mask"),_.each(h,function(a){a.remove()});var h=g.query("div.x-mask-msg");_.each(h,function(a){a.remove()})}}),Ext.define("MyBurnCalculator",function(){var a;return{extend:"Rally.data.lookback.calculator.TimeSeriesCalculator",config:{series:[],ignoreZeroValues:!0,flatScopeProjection:!1,peRecords:[],featureCompleteByState:!1,featureCompleteState:""},constructor:function(b){return a=this,this.lumenize=Rally.data.lookback.Lumenize,this.initConfig(b),this},pointsOffset:[],countOffset:[],data:[],lastAccepted:[],indexOffset:[],getMetrics:function(){var b=_.filter(a.series,function(a){return-1==a.name.indexOf("Projection")}),c=_.map(b,function(a){return{field:a.field,as:a.description,display:a.display,f:a.f}});return c},getDerivedFieldsOnInput:function(){return[{as:"CalcPreliminaryEstimate",f:function(b){var c=_.find(a.peRecords,function(a){return a.get("ObjectID")==b.PreliminaryEstimate}),d=void 0!==c?c.get("Value"):0;return d}},{as:"Completed",f:function(b){return a.featureCompleteByState?b.State==a.featureCompleteState:1==b.PercentDoneByStoryCount?1:0}}]},getMidPointIndex:function(a){var b=new Date,c=_.findIndex(a,function(a){return b.setHours(0,0,0,0)===new Date(Date.parse(a)).setHours(0,0,0,0)});return-1!==c?Math.round(c/2):-1},calcProjectionPoint:function(b,c,d,e,f,g,h){var i=this;if(0===e){console.log("Projection:",b),datesData=_.pluck(g,"label");var j=a.getMidPointIndex(datesData),k=new Date;datesData.length-1;i.data[b]=_.pluck(g,c),console.log("Projection Data:",i.data[b]),i.data[b]=_.filter(i.data[b],function(a,b){return _.isUndefined(h)||"mid"!==h?new Date(Date.parse(datesData[b]))<k:j>b});var l=i.data[b].length;a.ignoreZeroValues===!0&&(i.data[b]=_.filter(i.data[b],function(a,b){return 0!=b?0!==a:!0}));var m=i.data[b].length;i.indexOffset[b]=l-m,i.lastAccepted[b]=i.data[b][i.data[b].length-1],console.log("lastAccepted",i.lastAccepted[b],b);var n=linearProject(i.data[b],i.data[b].length-1);i.pointsOffset[b]=i.lastAccepted[b]-n}e-=i.indexOffset[b];var o=linearProject(i.data[b],e)+i.pointsOffset[b];return a.flatScopeProjection===!0&&("StoryPointsProjection"==b||"StoryCountProjection"==b)&&(o=i.lastAccepted[b]),o=Math.round(100*o)/100,_.isNaN(o)?null:o},getDerivedFieldsAfterSummary:function(){var b=_.filter(a.series,function(a){return-1!==a.name.indexOf("Projection")}),c=_.map(b,function(b){return{as:b.description,projectOn:b.projectOn,projectFrom:b.projectFrom,name:b.name,f:function(b,c,d,e){var f=a.calcProjectionPoint(this.name,this.projectOn,b,c,d,e,this.projectFrom);return f}}});return c},defined:function(a){return!_.isUndefined(a)&&!_.isNull(a)}}}),Ext.define("ForecastLine",function(){var a;return{config:{type:"linear",series:[]},constructor:function(b){a=this,this.initConfig(b);_.map(a.series,function(a,b){return[b,a]});return this},getProjectionLine:function(){return a.createRegressionSeries(a.series)},createRegressionSeries:function(b){var c=_.map(b,function(a,b){return[b,a]}),d=regression(a.type,c),e=_.indexOf(b,null),f=e-1,g=_.map(d.points,function(a,b){return e-1>b?null:d.points[b][1]});g=_.map(g,function(a){return _.isNaN(a)?null:a});var h=_.isNull(b[f])||_.isNull(g[f])?0:b[f]-g[f],i=_.map(g,function(a,b){return!_.isNull(a)&&b>=f?a+h:a});return i},getProjectionLineAtIndices:function(b){return _.map(b,function(b){var c=_.map(a.series,function(a,c){return b>c?a:null}),d=a.createRegressionSeries(c);return d})}}}),LineFitter.prototype={add:function(a,b){this.count++,this.sumX+=a,this.sumX2+=a*a,this.sumXY+=a*b,this.sumY+=b},project:function(a){var b=this.count*this.sumX2-this.sumX*this.sumX,c=(this.sumX2*this.sumY-this.sumX*this.sumXY)/b,d=(this.count*this.sumXY-this.sumX*this.sumY)/b;return c+a*d}};

               Rally.launchApp('CArABU.app.MsBurn', {
                   name: 'Milestone Burnup'
               });
        });
    </script>

    <style type="text/css">

.app {
}
.tsinfolink {
    position:absolute;
    right:0px;
    width: 14px;
    height: 14px;
    border-radius: 7px;
    text-align: center;
    color: white;
    background: #C0C0C0;
    border-style: solid;
    border-width: 1px;
    margin-top: 25px;
    margin-right: 5px;
    cursor: pointer;
}
    </style>

</head>
<body></body>
</html>